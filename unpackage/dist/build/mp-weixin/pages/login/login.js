"use strict";const e=require("../../common/vendor.js"),o={data:()=>({userInfo:{account_id:"",username:"",password:"",description:"茶里茶气的生活家",avatar:"/static/info/头像.png",level:2,activity:24,coupon:0,points:24,balance:99.9},loading:!1}),watch:{loading(o){o?e.index.showLoading({title:"登录中..."}):e.index.hideLoading()}},methods:{async handleLogin(){this.loading=!0;try{const o=await e.tr.callFunction({name:"login_register",data:{action:"login",account_id:this.userInfo.account_id,username:"",password:this.userInfo.password,has_token:!1}});if(200===o.result.code){const n=getApp();n.userInfo=o.result.userInfo,n.login_status=!0,e.index.setStorageSync("uid",o.result.userInfo.account_id),this.loading=!1,e.index.showToast({title:"登录成功",icon:"success"}),setTimeout((()=>{e.index.switchTab({url:"/pages/my_info/my_info"})}),1e3)}else e.index.showToast({title:o.result.msg,icon:"none"})}catch(o){e.index.showToast({title:"登录失败",icon:"none"}),console.error(o)}finally{this.loading=!1}},goToRegister(){e.index.navigateTo({url:"/pages/register/register"})}}};const n=e._export_sfc(o,[["render",function(o,n,s,t,i,a){return{a:i.userInfo.account_id,b:e.o((e=>i.userInfo.account_id=e.detail.value)),c:i.userInfo.password,d:e.o((e=>i.userInfo.password=e.detail.value)),e:e.o(((...e)=>a.handleLogin&&a.handleLogin(...e))),f:e.o(((...e)=>a.goToRegister&&a.goToRegister(...e)))}}]]);wx.createPage(n);
