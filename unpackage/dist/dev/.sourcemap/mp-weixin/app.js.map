{"version":3,"file":"app.js","sources":["App.vue","main.js"],"sourcesContent":["<script>\r\nimport PubSub from 'pubsub-js';\r\nexport default \r\n{\r\n\tdata(){\r\n\t\treturn { \r\n\t\t\tuserInfo: {\r\n\t\t\t\taccount_id: null,\r\n\t\t\t\tusername: 'Êú™ÁôªÂΩï', // ‰øùÊåÅÈÄóÂè∑\r\n\t\t\t\tdescription: 'Ëøô‰∏™‰∫∫ÂæàÊáíÔºå‰ªÄ‰πàÈÉΩÊ≤°ÊúâÁïô‰∏ã',\r\n\t\t\t\tavatar: '/static/info/Êú™ÁôªÂΩï.png',\r\n\t\t\t\tlevel: 0,\r\n\t\t\t\tactivity: 0,\r\n\t\t\t\tcoupon: 0,\r\n\t\t\t\tpoints: 0,\r\n\t\t\t\tbalance: 0,\r\n\t\t\t\tip: '',\r\n\t\t\t\tadmin: false // ÊòØÂê¶‰∏∫ÁÆ°ÁêÜÂëò\r\n\t\t\t}, \r\n\t\t\tlogin_status: false, // ÁôªÂΩïÁä∂ÊÄÅ\r\n\t\t\tactivityTimer: null,  // ÂÆöÊó∂Âô®\r\n\t\t\tactivityStartTime: null,  // ÂêØÂä®Êó∂Èó¥Êà≥ÔºàmsÔºâ\r\n\t\t\tactivityElapsedSeconds: 0, // Â∑≤Á¥ØËÆ°Êó∂Èó¥ÔºàÁßíÔºâ\r\n\t\t};\r\n\t},\r\n\tonLaunch: function() {\r\n\t\tconsole.log('App Launch')\r\n\t\tPubSub.subscribe('remind_upgrade', (msg,level) => {\r\n\t\t\tconsole.log('Êî∂Âà∞ÂçáÁ∫ßÊèêÈÜí',level)\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: `ÂçáÁ∫ß‰∫Ü`,\r\n\t\t\t\tcontent: `üéâ ÊÅ≠Âñú‰Ω†ÂçáÁ∫ßÂà∞ V${level}`,\r\n\t\t\t\tshowCancel: false,\r\n\t\t\t\tconfirmText: 'Áü•ÈÅì‰∫Ü',\r\n\t\t\t});\r\n\t\t})\r\n\t\tPubSub.subscribe('update_activity', async (msg,activity) => {\r\n\t\t\tconst app = getApp();\r\n\t\t\tif(!app.userInfo.account_id) {\r\n\t\t\t\tconsole.log('Êú™ÁôªÂΩïÔºåË∑≥ËøáÊõ¥Êñ∞Ê¥ªÂä®ÂÄº')\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tapp.userInfo.activity += activity;\r\n\t\t\tif(app.userInfo.activity>=100) {\r\n\t\t\t\tapp.userInfo.activity %= 100;\r\n\t\t\t\tapp.userInfo.level += 1;\r\n\t\t\t\tconsole.log(' ÂçáÁ∫ß‰∫Ü')\r\n\t\t\t\tPubSub.publish('remind_upgrade',app.userInfo.level);\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\tawait uniCloud.callFunction({\r\n\t\t\t\tname: 'update_activity',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\taccount_id: app.userInfo.account_id,\r\n\t\t\t\t\tlevel: app.userInfo.level,\r\n\t\t\t\t\tactivity: app.userInfo.activity\r\n\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} catch(e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tonShow: function() {\r\n\t\tconsole.log('App Show')\r\n\r\n\t\t// ËÆ∞ÂΩïÊó∂Èó¥\r\n\t\tthis.activityStartTime = Date.now();\r\n\r\n\t\t// Ê∏ÖÈô§ÊóßÂÆöÊó∂Âô®ÔºàÈÅøÂÖçÈáçÂ§çÔºâ\r\n\t\tif (this.activityTimer) {\r\n\t\t\tclearInterval(this.activityTimer);\r\n\t\t}\r\n\r\n\t\t// ÂêØÂä®Êñ∞ÂÆöÊó∂Âô®\r\n\t\tthis.activityTimer = setInterval(() => {\r\n\t\t\tconst now = Date.now();\r\n\t\t\tconst elapsed = Math.floor((now - this.activityStartTime) / 1000); // ÁßíÊï∞\r\n\t\t\t// console.log('Â∑≤Á¥ØËÆ°Êó∂Èó¥:', elapsed)\r\n\t\t\tif (elapsed > this.activityElapsedSeconds) {\r\n\t\t\t\tconst diff = elapsed - this.activityElapsedSeconds;\r\n\t\t\t\tthis.activityElapsedSeconds = elapsed;\r\n\r\n\t\t\t\tconst addedActivity = Math.floor(diff / 60); // ÊØè 60 ÁßíÂä†1ÁÇπ\r\n\t\t\t\t// console.log('Â¢ûÂä†Ê¥ªÂä®ÂÄº:', addedActivity,diff)\r\n\t\t\t\tif (addedActivity > 0) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst app = getApp();\r\n\t\t\t\t\t// console.log('Â¢ûÂä†Ê¥ªÂä®ÂÄº',app.userInfo.account_id)\r\n\t\t\t\t\tif(app.userInfo.account_id) {\r\n\t\t\t\t\t\t// console.log('Êõ¥Êñ∞Ê¥ªÂä®ÂÄº')\r\n\t\t\t\t\t\tPubSub.publish('update_activity',addedActivity);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, 60000); // ÊØè60ÁßíÊ£ÄÊµã‰∏ÄÊ¨°\r\n\t},\r\n\tonHide: function() {\r\n\t\tconsole.log('App Hide')\r\n\t\tif (this.activityTimer) {\r\n\t\t\tclearInterval(this.activityTimer);\r\n\t\t\tthis.activityTimer = null;\r\n\t\t}\r\n\t},\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\t/*ÊØè‰∏™È°µÈù¢ÂÖ¨ÂÖ±css */\r\n</style>","import App from './App'\n\n// #ifndef VUE3\nimport Vue from 'vue'\nimport './uni.promisify.adaptor'\nimport PubSub from 'pubsub-js'\nVue.config.productionTip = false\nApp.mpType = 'app'\nconst app = new Vue({\n  ...App\n})\napp.$mount()\nVue.prototype.PubSub = PubSub;\n// #endif\n\n// #ifdef VUE3\nimport { createSSRApp } from 'vue'\nexport function createApp() {\n  const app = createSSRApp(App)\n  return {\n    app\n  }\n}\n// #endif"],"names":["uni","PubSub","uniCloud","createSSRApp","App"],"mappings":";;;;;;;;;;;;;;;AAEA,MAAK,YAAQ;AAAA,EACb,OAAA;AACE,WAAK;AAAA,MACJ,UAAM;AAAA,QACL,YAAS;AAAA,QACT,UAAU;AAAA;AAAA,QACV,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,OAAQ;AAAA,QACR,UAAQ;AAAA,QACR,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,IAAI;AAAA,QACJ,OAAM;AAAA;AAAA,MACN;AAAA,MACD,cAAC;AAAA;AAAA,MACD,eAAe;AAAA;AAAA,MACf,mBAAmB;AAAA;AAAA,MACnB;;IACA;AAAA,EACD;AAAA,EACD,UAAC,WAAA;AACAA,kBAAAA,MAAI,MAAM,OAAM,iBAAI,YAAA;AACpBC,kBAAAA,OAAA,UAAA,kBAAe,MAAK,UAAI;AACvBD,oBAAAA,MAAI,MAAM,OAAM,iBAAgB,UAAS,KAAK;AAC9CA,oBAAAA,MAAA,UAAA;AAAA,QACC,OAAO;AAAA,QACP,SAAS,cAAG,KAAA;AAAA,QACZ,YAAW;AAAA,QACX,aAAa;AAAA,MACb,CAAA;AAAA,IACD,CAAA;AACDC,kBAAAA,OAAC,UAAA,mBAAA,OAAA,KAAA,aAAA;AACA,YAAM,MAAM;AACZ,UAAG,CAAC,IAAI,SAAS,YAAG;AACnBD,sBAAAA,MAAI,MAAM,OAAM,iBAAY,aAAA;AAC5B;AAAA,MACA;AACD,UAAA,SAAA,YAAA;AACA,UAAG,IAAI,SAAS,YAAU,KAAK;AAC9B,YAAI,SAAS,YAAY;AACzB,YAAI,SAAS,SAAS;AACtBA,sBAAAA,MAAI,MAAM,OAAM,iBAAO,MAAA;AACvBC,sBAAY,OAAA,QAAA,kBAAA,IAAI,SAAE,KAAA;AAAA,MAClB;AACD,UAAA;AACC,cAAEC,cAAAA,GAAA,aAAA;AAAA,UACF,MAAM;AAAA,UACN,MAAM;AAAA,YACL,YAAK,IAAA,SAAA;AAAA,YACL,OAAO,IAAK,SAAQ;AAAA,YACpB,UAAU,IAAI,SAAS;AAAA,UACvB;AAAA,QACD,CAAA;AAAA,MACA,SAAE,GAAA;AACHF,sBAAAA,MAAK,MAAM,SAAA,iBAAA,CAAA;AAAA,MACV;AAAA,IACD,CAAA;AAAA,EACD;AAAA,EACD,QAAC,WAAA;AACAA,kBAAAA,MAAI,MAAM,OAAM,iBAAE,UAAA;AAGlB,SAAK,oBAAC,KAAA;AAGN,QAAI,KAAK,eAAK;AACb,oBAAc,KAAK,aAAI;AAAA,IACvB;AAGD,SAAK,gBAAG,YAAA,MAAA;AACP,YAAM,MAAM,KAAM;AAClB,YAAM,UAAU,KAAK,OAAC,MAAA,KAAA,qBAAA,GAAA;AAEtB,iDAAuB;AACtB,cAAM,OAAO,UAAU,KAAK;AAC5B,sCAA8B;;AAI9B,YAAe,gBAAA,GAAA;;AAId,cAAG,IAAY,SAAA,YAAA;AAEdC,0BAAAA,OAAe,QAAA,mBAAA,aAAO;AAAA,UACtB;AAAA,QACD;AAAA,MACD;AAAA,IACD,GAAA,GAAA;AAAA,EACD;AAAA,EACD,QAAC,WAAA;AACAD,kBAAAA,MAAI,MAAM,OAAM,iBAAE,UAAA;AAClB,QAAA,KAAA,eAAA;AACC,oBAAc,KAAK,aAAI;AACvB,WAAK,gBAAgB;AAAA,IACrB;AAAA,EACD;;ACrFK,SAAS,YAAY;AAC1B,QAAM,MAAMG,cAAY,aAACC,SAAG;AAC5B,SAAO;AAAA,IACL;AAAA,EACD;AACH;;;"}