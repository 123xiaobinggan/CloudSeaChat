{"version":3,"file":"edit_profile.js","sources":["pages/edit_profile/edit_profile.vue","../../../H-builderx/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZWRpdF9wcm9maWxlL2VkaXRfcHJvZmlsZS52dWU"],"sourcesContent":["<template>\r\n  <view class=\"edit-profile-container\">\r\n    <view class=\"header\">\r\n      <text class=\"title\">编辑资料</text>\r\n      <button class=\"save-btn\" @click=\"saveProfile\">保存</button>\r\n    </view>\r\n    \r\n    <view class=\"avatar-upload\">\r\n      <image class=\"avatar\" :src=\"tempUserInfo.avatar\"></image>\r\n      <button class=\"upload-btn\" @click=\"changeAvatar\">更换头像</button>\r\n    </view>\r\n    \r\n    <view class=\"form-item\">\r\n      <text class=\"label\">用户名</text>\r\n      <input class=\"input\" v-model=\"tempUserInfo.username\" placeholder=\"请输入用户名\" />\r\n    </view>\r\n    \r\n    <view class=\"form-item\">\r\n      <text class=\"label\">个人描述</text>\r\n      <textarea class=\"textarea\" v-model=\"tempUserInfo.description\" placeholder=\"介绍一下自己吧\" />\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { pubsub } from '../../utils/pubsub';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tempUserInfo: {\r\n        username: '',\r\n        description: '',\r\n        avatar: ''\r\n      }\r\n    };\r\n  },\r\n  onLoad() {\r\n    // 获取当前用户信息\r\n    const pages = getCurrentPages();\r\n    const prevPage = pages[pages.length - 2];\r\n    if (prevPage && prevPage.data.userInfo) \r\n    {\r\n      this.tempUserInfo = \r\n      {\r\n        ...prevPage.data.userInfo,\r\n        avatar: prevPage.data.userInfo.avatar\r\n      };\r\n    }\r\n  },\r\n  methods: {\r\n    changeAvatar() {\r\n      uni.chooseImage({\r\n        count: 1,\r\n        sizeType: ['compressed'],\r\n        sourceType: ['album', 'camera'],\r\n        success: (res) => {\r\n          this.tempUserInfo.avatar = res.tempFilePaths[0];\r\n        }\r\n      });\r\n    },\r\n    saveProfile() {\r\n      // 发布用户信息更新事件\r\n      pubsub.publish('userInfoUpdate', this.tempUserInfo);\r\n      \r\n      // 提示保存成功\r\n      uni.showToast({\r\n        title: '保存成功',\r\n        icon: 'success'\r\n      });\r\n\r\n      // 返回上一页\r\n      uni.navigateBack();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import url(edit_profile.css);\r\n</style>","import MiniProgramPage from 'D:/CODE/vue/canteen_program/pages/edit_profile/edit_profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","pubsub"],"mappings":";;;AA2BA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,cAAc;AAAA,QACZ,UAAU;AAAA,QACV,aAAa;AAAA,QACb,QAAQ;AAAA,MACV;AAAA;EAEH;AAAA,EACD,SAAS;AAEP,UAAM,QAAQ;AACd,UAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AACvC,QAAI,YAAY,SAAS,KAAK,UAC9B;AACE,WAAK,eACL;AAAA,QACE,GAAG,SAAS,KAAK;AAAA,QACjB,QAAQ,SAAS,KAAK,SAAS;AAAA;IAEnC;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,eAAe;AACbA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,UAAU,CAAC,YAAY;AAAA,QACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAChB,eAAK,aAAa,SAAS,IAAI,cAAc,CAAC;AAAA,QAChD;AAAA,MACF,CAAC;AAAA,IACF;AAAA,IACD,cAAc;AAEZC,mBAAAA,OAAO,QAAQ,kBAAkB,KAAK,YAAY;AAGlDD,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACR,CAAC;AAGDA,oBAAG,MAAC,aAAY;AAAA,IAClB;AAAA,EACF;AACF;;;;;;;;;;;;;AC1EA,GAAG,WAAW,eAAe;"}