{"version":3,"names":["_sfc_main","data","accountId","username","password","userInfo","account_id","description","avatar","level","activity","coupon","points","balance","mounted","_this","pubsub","subscribe","methods","handleRegister","_this2","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","res","wrap","_callee$","_context","prev","next","common_vendor","er","callFunction","name","action","sent","result","code","index","showToast","title","icon","publish","switchTab","url","msg","t0","__f__","stop","goToLogin","wx","createPage","MiniProgramPage"],"sources":["register.vue","cGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIudnVl"],"sourcesContent":["<template>\r\n  <view class=\"register-container\">\r\n    <input v-model=\"username\" placeholder=\"用户名(2-13个字符)\" class=\"input-field\" />\r\n    <input v-model=\"password\" type=\"password\" placeholder=\"密码\" class=\"input-field\" />\r\n    <button @click=\"handleRegister\" class=\"register-button\">注册</button>\r\n    <view class=\"login-link\" @click=\"goToLogin\">已有账号？去登录</view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      accountId: '',\r\n      username: '',\r\n      password: '',\r\n      userInfo: {\r\n        username: '未登录',\r\n        account_id: '',\r\n        description: '这个人很懒，什么都没有留下',\r\n        avatar: '/static/info/未登录.png',\r\n        level: 0,\r\n        activity: 0,\r\n        coupon: 0,\r\n        points: 0,\r\n        balance: 0\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    pubsub.subscribe('userRegister', (userInfo) => {\r\n      this.userInfo = userInfo;\r\n    }); \r\n  },\r\n  methods: {\r\n    async handleRegister() {\r\n      try {\r\n        const res = await uniCloud.callFunction({\r\n          name: 'connect',\r\n          data: {\r\n            action: 'register',\r\n            username: this.username,\r\n            password: this.password,\r\n          }\r\n        })\r\n\r\n        if (res.result.code === 0) {\r\n          uni.showToast({ title: '注册成功', icon:'success' })\r\n          pubsub.publish('userInfoUpdate', this.userInfo)\r\n          uni.switchTab({ url: '/pages/my_info/my_info' })\r\n        } else {\r\n          uni.showToast({ title: res.result.msg})\r\n        }\r\n      } catch (e) {\r\n        uni.showToast({ title: '注册失败', icon: 'none' })\r\n        console.error(e)\r\n      }\r\n    },\r\n    goToLogin() {\r\n      uni.switchTab({\r\n        url: '/pages/login/login'\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n@import url(register.css);\r\n</style>","import MiniProgramPage from 'D:/CODE/vue/canteen_program/pages/register/register.vue'\nwx.createPage(MiniProgramPage)"],"mappings":";;;;;;AAUA,IAAKA,SAAA,GAAU;EACbC,IAAA,WAAAA,KAAA,EAAO;IACL,OAAO;MACLC,SAAA,EAAW;MACXC,QAAA,EAAU;MACVC,QAAA,EAAU;MACVC,QAAA,EAAU;QACRF,QAAA,EAAU;QACVG,UAAA,EAAY;QACZC,WAAA,EAAa;QACbC,MAAA,EAAQ;QACRC,KAAA,EAAO;QACPC,QAAA,EAAU;QACVC,MAAA,EAAQ;QACRC,MAAA,EAAQ;QACRC,OAAA,EAAS;MACV;IACH;EACD;EACDC,OAAA,WAAAA,QAAA,EAAU;IAAA,IAAAC,KAAA;IACRC,MAAA,CAAOC,SAAA,CAAU,gBAAgB,UAACZ,QAAA,EAAa;MAC7CU,KAAA,CAAKV,QAAA,GAAWA,QAAA;IAClB,CAAC;EACF;EACDa,OAAA,EAAS;IACDC,cAAA,WAAAA,eAAA,EAAiB;MAAA,IAAAC,MAAA;MAAA,OAAAC,kBAAA,eAAAC,oBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,GAAA;QAAA,OAAAH,oBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEDC,aAAA,CAAQC,EAAA,CAACC,YAAA,CAAa;gBACtCC,IAAA,EAAM;gBACNjC,IAAA,EAAM;kBACJkC,MAAA,EAAQ;kBACRhC,QAAA,EAAUiB,MAAA,CAAKjB,QAAA;kBACfC,QAAA,EAAUgB,MAAA,CAAKhB;gBACjB;cAAA,CACD;YAAA;cAPKqB,GAAA,GAAAG,QAAA,CAAAQ,IAAA;cASN,IAAIX,GAAA,CAAIY,MAAA,CAAOC,IAAA,KAAS,GAAG;gBACzBP,aAAA,CAAGQ,KAAA,CAACC,SAAA,CAAU;kBAAEC,KAAA,EAAO;kBAAQC,IAAA,EAAK;gBAAA,CAAW;gBAC/C1B,MAAA,CAAO2B,OAAA,CAAQ,kBAAkBvB,MAAA,CAAKf,QAAQ;gBAC9C0B,aAAA,CAAAQ,KAAA,CAAIK,SAAA,CAAU;kBAAEC,GAAA,EAAK;gBAAA,CAA0B;cAAA,OAC1C;gBACLd,aAAA,CAAGQ,KAAA,CAACC,SAAA,CAAU;kBAAEC,KAAA,EAAOhB,GAAA,CAAIY,MAAA,CAAOS;gBAAG,CAAC;cACxC;cAAAlB,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAmB,EAAA,GAAAnB,QAAA;cAEAG,aAAA,CAAGQ,KAAA,CAACC,SAAA,CAAU;gBAAEC,KAAA,EAAO;gBAAQC,IAAA,EAAM;cAAA,CAAQ;cAC7CX,aAAA,CAAAQ,KAAA,CAAAS,KAAA,+CAAApB,QAAA,CAAAmB,EAAA,CAAe;YAAA;YAAA;cAAA,OAAAnB,QAAA,CAAAqB,IAAA;UAAA;QAAA,GAAAzB,OAAA;MAAA;IAElB;IACD0B,SAAA,WAAAA,UAAA,EAAY;MACVnB,aAAA,CAAAQ,KAAA,CAAIK,SAAA,CAAU;QACZC,GAAA,EAAK;MAAA,CACN;IACH;EACF;AACF;;;;;;;;;;;;;;;;;;;;AC/DAM,EAAA,CAAGC,UAAA,CAAWC,eAAe","ignoreList":[]}