{"bsonType":"object","required":["article_id","user_id","comment_content","like_count","comment_type","reply_user_id","reply_comment_id"],"permission":{"read":true,"create":"auth.uid != null","update":"doc.user_id == auth.uid","delete":"doc.user_id == auth.uid"},"properties":{"_id":{"description":"存储文档 ID（文章 ID），系统自动生成"},"post_id":{"bsonType":"string","description":"文章ID，opendb-news-posts 表中的`_id`字段","foreignKey":"opendb-news-articles._id"},"account_id":{"bsonType":"string","description":"评论者ID，参考`uni-id-users` 表","forceDefaultValue":{"$env":"uid"},"foreignKey":"uni-id-users._id"},"content":{"bsonType":"string","description":"评论内容","title":"评论内容","trim":"right"},"like_count":{"bsonType":"int","description":"评论喜欢数、点赞数","default":0},"liked":{"bsonType":"bool","desciption":"当前是否点赞","default":0},"create_time":{"bsonType":"timestamp","description":"评论发表时间","forceDefaultValue":{"$env":"now"}},"ip":{"bsonType":"string","description":"评论发表时 IP 地址","forceDefaultValue":{"$env":"clientIP"},"showReplyInput":{"bsontype":"bool","desciption":"是否显示回复输入框","default":0},"showReply":{"bsontype":"bool","desciption":"是否显示回复","default":0},"replies":{"bsonType":"array","description":"该评论的回复列表","default":[],"items":{"bsonType":"object","required":["account_id","content","date"],"properties":{"account_id":{"bsonType":"string","description":"回复者ID","foreignKey":"uni-id-users._id"},"reply_account_id":{"bsonType":"string","description":"被回复的用户ID"},"reply_username":{"bsonType":"string","description":"被回复的用户名"},"content":{"bsonType":"string","description":"回复内容","trim":"right"},"create_time":{"bsonType":"timestamp","description":"回复时间","forceDefaultValue":{"$env":"now"}},"like_count":{"bsonType":"int","default":0},"liked":{"bsonType":"bool","default":false},"ip":{"bsonType":"string","description":"评论发表时 IP 地址","forceDefaultValue":{"$env":"clientIP"}},"showReplyInput":{"bsontype":"bool","desciption":"是否显示回复输入框","default":0}}}}}},"version":"0.0.1"}