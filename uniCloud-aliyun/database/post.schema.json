{"bsonType":"object","required":["user_id","content","post_type","visibility","create_time"],"permission":{"read":true,"create":"auth.uid != null","update":"doc.user_id == auth.uid","delete":"doc.user_id == auth.uid"},"properties":{"_id":{"description":"动态ID，自动生成"},"account_id":{"bsonType":"string","description":"发布用户ID","foreignKey":"uni-id-users._id","forceDefaultValue":{"$env":"uid"}},"content":{"bsonType":"string","description":"文字内容","title":"内容","minLength":1,"maxLength":1000},"media":{"bsonType":"array","description":"媒体数组（图片或视频，最多9个）","maxItems":9,"items":{"bsonType":"object","required":["type","url"],"properties":{"type":{"bsonType":"string","enum":["image","video"],"description":"媒体类型：图片或视频"},"url":{"bsonType":"string","description":"媒体地址"},"poster":{"bsonType":"string","description":"视频封面，仅在type为video时有效"}}}},"post_type":{"bsonType":"int","description":"动态类型：0-普通图文，1-转发","default":0},"source_post":{"bsonType":"object","description":"被转发的原始动态（仅保留部分字段作为冗余）","properties":{"post_id":{"bsonType":"string","description":"原始帖子的 _id"},"account_id":{"bsonType":"string","description":"原始发布者 ID","foreignKey":"uni-id-users._id"},"username":{"bsonType":"string","description":"原始发布者昵称","maxLength":100},"avatar":{"bsonType":"string","description":"原始发布者头像 URL","maxLength":500},"content":{"bsonType":"string","description":"原始动态内容","maxLength":1000},"media":{"bsonType":"array","description":"媒体数组（图片或视频，最多9个）","maxItems":9,"items":{"bsonType":"object","required":["type","url"],"properties":{"type":{"bsonType":"string","enum":["image","video"],"description":"媒体类型：图片或视频"},"url":{"bsonType":"string","description":"媒体地址"},"poster":{"bsonType":"string","description":"视频封面，仅在type为video时有效"}}}},"ip":{"bsonType":"string","description":"位置（可选）"},"create_time":{"bsonType":"timestamp","description":"原始动态的创建时间"}},"required":["post_id","account_id"]},"like_count":{"bsonType":"int","description":"点赞数量","default":0},"comments_count":{"bsonType":"int","description":"评论数量","default":0},"forward_count":{"bsonType":"int","description":"转发数量","default":0},"visibility":{"bsonType":"int","description":"可见范围：0-所有人，1-仅我可见","default":0},"create_time":{"bsonType":"timestamp","description":"发布时间","forceDefaultValue":{"$env":"now"}},"ip":{"bsonType":"string","description":"位置（可选）"},"device_model":{"bsonType":"string","description":"用户设备型号，如 iPhone 13(5G)、荣耀60 SE(5G)","maxLength":100},"tags":{"bsonType":"array","description":"标签（可选）","items":{"bsonType":"string"}},"status":{"bsonType":"int","description":"状态：0-正常，1-审核中，2-已删除","default":0}},"version":"1.0.0"}